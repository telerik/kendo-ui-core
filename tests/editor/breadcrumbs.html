<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>kendo.ui.Editor Tests</title>

        <script src="../../src/jquery.js"></script>
        <script src="../qunit/qunit/qunit.js"></script>
        <script src="../qunit-runner.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.fx.js"></script>
        <script src="../../src/kendo.data.js"></script>
        <script src="../../src/kendo.popup.js"></script>
        <script src="../../src/kendo.list.js"></script>
        <script src="../../src/kendo.combobox.js"></script>
        <script src="../../src/kendo.dropdownlist.js"></script>
        <script src="../../src/kendo.window.js"></script>
        <script src="../../src/kendo.colorpicker.js"></script>
        <script src="../../src/kendo.editor.js"></script>
        <script src="util.js"></script>

        <link rel="stylesheet" href="../qunit/qunit/qunit.css" />
        <link rel="stylesheet" href="../../styles/web/kendo.common.css" />

        <style>

            html {
                font-size: 12px;
            }

            .k-breadcrumbs div {
                position: absolute;
            }

            .k-breadcrumbs a {
                display: inline-block;
                overflow: hidden;
            }

        </style>
    </head>
    <body>

        <div><textarea cols="20" rows="4" id="Editor1" name="Editor1"></textarea></div>

        <!--Html.Telerik().ScriptRegistrar().DefaultGroup(g => g.Add("telerik.common.js").Add("telerik.imagebrowser.js"));-->

        <!--<script>

            $("#Editor1").kendoEditor();


            var div;

            module("Editor/Breadcrumbs", {
            setup: function() {
            div = $('<div class="k-breadcrumbs" />').appendTo(document.body).width(400);
                },
                teardown: function() {
                div.remove();
                }
                });

                test("_path concatenates the text of the breadcrumb trail", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(null,{});

                equal(breadcrumbs._path($("<a>foo</a><a>bar</a>")), "/foo/bar")
                });

                test("_path returns slash if there are no breadcrumbs", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(null,{});

                equal(breadcrumbs._path([]), "/");
                });

                test("_focus hides the breadcrumbs", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo" });

                breadcrumbs._focus();

                ok(div.find("div").is(":not(:visible)"));
                });

                test("_focus sets the value of the input", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo" });

                breadcrumbs._focus();

                equal(div.find("input").val(), "/foo");
                });


                test("_blur clears the input", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo" });

                breadcrumbs._focus();
                breadcrumbs._blur({});

                equal(div.find("input").val(), "");
                });

                test("_blur shows the breadcrumbs", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo" });

                breadcrumbs._focus();
                breadcrumbs._blur({});

                ok(div.find("div").is(":visible"));
                });

                test("_click changes the value", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                breadcrumbs._click({ target: div.find("a:first") });

                equal(breadcrumbs.value(), "/foo/bar");
                });

                test("_click does not raise change if the value is not changed", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                var changeRaised = false;

                div.bind("t:change", function() {
                changeRaised = true;
                });

                breadcrumbs._click({ target: div.find("a:last") });

                ok(!changeRaised);
                });

                test("_blur raises change if the value has changed", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                var changeRaised = false;

                div.bind("t:change", function() {
                changeRaised = true;
                });

                breadcrumbs._focus();

                div.find("input").val("/foo/bar/baz");

                breadcrumbs._blur();

                ok(changeRaised);
                });    

                test("pressing enter raises the change event", function(){
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                var changeRaised = false;

                div.bind("t:change", function() {
                changeRaised = true;
                });

                var e = $.Event();
                e.type = "keydown";
                e.keyCode = 13;

                div.find("input").val("/foo/bar/baz").trigger(e);

                ok(changeRaised);
                });

                test("triggering refresh updates the breadcrumbs", function() {
                new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                div.val("/foo/bar/baz");
                div.trigger("t:refresh");

                equal(div.find("a").length, 2);
                });

                test("should hide breadcrumbs if they are too long", function() {
                div.width(100);

                new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar/baz" });

                equal(div.find("a:visible").length, 1);
                });

                test("clicking the last breadcrumb when the rest are hidden sets the value", function() {
                div.width(100);

                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar/baz" });

                breadcrumbs._click({ target: div.find("a:last") });

                equal(div.val(), "/foo/bar/baz");
                });

                test("should set the width of the last link if it is wider than the container", function() {
                div.width(100);

                new kendo.ui.Breadcrumbs(div[0], { path: "/foofoofoofoofoofoofoofoofoo" });

                ok(div.find("a").width() < div.width());
                });

                test("should condense adjacent slashes", function() {
                new kendo.ui.Breadcrumbs(div[0], { path: "///foo///bar///baz" });
                equal(div.find("a").length, 1);
                equal(div.val(), "/foo/bar/baz");
                });    

                test("should condense adjacent slashes entered by the user", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                breadcrumbs._focus();

                div.find("input").val("///foo///bar//baz");

                breadcrumbs._blur();

                equal(div.val(), "/foo/bar/baz");
                });

                test("should initialize base path", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                equal(breadcrumbs._basePath, "/foo/bar");
                });

                test("should set value to base path if empty", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                breadcrumbs._focus();

                div.find("input").val("");

                breadcrumbs._blur();

                equal(div.val(), "/foo/bar");
                });

                test("should set value to base path if invalid", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                breadcrumbs._focus();

                div.find("input").val("/baz");

                breadcrumbs._blur();

                equal(div.val(), "/foo/bar");
                });

                test("breadcrumbs for the base path are not created", function() {
                new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar" });

                equal(div.find("a").length, 1);
                });

                test("selecting item from the drop down fires change event", function() {
                var breadcrumbs = new kendo.ui.Breadcrumbs(div[0], { path: "/foo/bar", roots: ["/foo/","/baz/"] });

                var changeRaised = false;

                div.bind("t:change", function() {
                changeRaised = true;
                });

                div.find(".k-select").click();
                $(".k-popup .k-item:eq(1)").click();

                ok(changeRaised);
                equal(breadcrumbs.value(), "/baz/");
                });

            </script>-->

            <h1 id="qunit-header">kendo.ui.Editor Tests</h1>
            <h2 id="qunit-banner"></h2>
            <div id="qunit-testrunner-toolbar"></div>
            <h2 id="qunit-userAgent"></h2>
            <ol id="qunit-tests"></ol>
            <div id="qunit-fixture">test markup, will be hidden</div>
            <ul id="log"></ul>

        </body>
    </html>

<!DOCTYPE html>
<html>
    <head>
        <title>kendo.ui.panelbar Tests</title>
        <script src="../../src/jquery.js"></script>
        <script src="../qunit/qunit/qunit.js"></script>
        <script src="../qunit-runner.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.data.js"></script>
        <script src="../../src/kendo.tabstrip.js"></script>
        <script type="text/javascript" src="../jquery.mockjax.js"></script>
        <link rel="stylesheet" href="../qunit/qunit/qunit.css" />
        <link type="text/css" href="../../styles/web/kendo.common.css" rel="stylesheet"/>

        <script type="text/javascript">

            var isRaised;

            var argsCheck = false;

            //handlers
            function Select(e) {
                if (argsCheck) {
                    isRaised = !!e.contentElement;
                    argsCheck = false;
                } else
                    isRaised = true;
            }

            $(document).ready(function() {
                $("#TabStrip1").kendoTabStrip({ animation: false, select: Select, contentUrls: [ 'AjaxView1.html', 'AjaxView2.html', 'AjaxView1.html', 'AjaxView2.html', 'AjaxView1.html', 'AjaxView2.html' ] });
            });

        </script>


</head>
<body>

<div class="k-widget k-tabstrip k-header" id="TabStrip1" style="visibility: hidden; position: absolute;">
    <ul class="k-reset k-tabstrip-items">
        <li class="k-item k-state-default k-state-active"><a class="k-link" href="#TabStrip1-1"><img alt="image"
                                                                                                    class="k-image"
                                                                                                    src="../../playground/Icons/Suites/mvc.png">ASP.NET
            MVC</a></li>
        <li class="k-item k-state-disabled"><a class="k-link" href="#TabStrip1-2"><img alt="image" class="k-image"
                                                                                     src="../../playground/Icons/Suites/sl.png">Silverlight</a>
        </li>
        <li class="k-item k-state-default"><a class="k-link" href="#TabStrip1-3"><img alt="image" class="k-image"
                                                                                     src="../../playground/Icons/Suites/ajax.png">ASP.NET
            AJAX</a></li>
        <li class="k-item k-state-default"><a class="k-link" href="#TabStrip1-4"><img alt="image" class="k-image"
                                                                                     src="../../playground/Icons/Suites/orm.png">OpenAccess
            ORM</a></li>
        <li class="k-item k-state-default"><a class="k-link" href="#TabStrip1-5"><img alt="image" class="k-image"
                                                                                     src="../../playground/Icons/Suites/rep.png">Reporting</a>
        </li>
        <li class="k-item k-state-default"><a class="k-link" href="#TabStrip1-6"><img alt="image" class="k-image"
                                                                                     src="../../playground/Icons/Suites/sitefinity.png">Sitefinity
            ASP.NET CMS</a></li>
    </ul>
    <div class="k-content k-state-active" id="TabStrip1-1" style="display: block;">
        <ul>
            <li>Pure ASP.NET MVC components</li>
            <li>Completely Open Source</li>
            <li>Exceptional Performance</li>

            <li>Based on jQuery</li>
            <li>Search Engine Optimized</li>
            <li>Cross-browser support</li>
        </ul>
    </div>
    <div class="k-content" id="TabStrip1-2"></div>
    <div class="k-content" id="TabStrip1-3"></div>
    <div class="k-content" id="TabStrip1-4"></div>
    <div class="k-content" id="TabStrip1-5"></div>
    <div class="k-content" id="TabStrip1-6"></div>
</div>

    <script type="text/javascript">

        function getRootItem(index) {
            return $('#TabStrip1').find('.k-item').eq(index)
        }

        function getTabStrip() {
            return $("#TabStrip1").data("kendoTabStrip");
        }

        asyncTest('clicking should make clicked item active', function() {
            var item = getRootItem(2);

            item.find('> .k-link').trigger('mouseup');

            setTimeout(function() {
                ok(item.hasClass('k-state-active'));
                start();
            }, 100);
        });

        asyncTest('clicking should make all items except clicked unactive', function() {
            var item = getRootItem(0);

            item.find('> .k-link').trigger('mouseup');

            setTimeout(function() {
                equal(item.parent().find('.k-state-active').length, 1);
                start();
            }, 10);
        });

//        asyncTest('clicking disabled tab should not navigate', function() {
//            var tabStrip = getTabStrip().element,
//                item = getRootItem(1);
//
//            var isDefaultPrevented = false,
//                testHandler = function (e) {
//                    isDefaultPrevented = e.isDefaultPrevented();
//                    e.preventDefault();
//                };
//
//            tabStrip.delegate('.k-link', 'mouseup', testHandler);
//            item.find('> .k-link').trigger('mouseup');
//            tabStrip.undelegate('.k-link', 'mouseup', testHandler);
//
//            setTimeout(function() {
//                ok(isDefaultPrevented);
//                start();
//            }, 100);
//        });
//
        test('ajax content url should be attached to item', function() {
            var tabStrip = $(getTabStrip().element),
                item = getRootItem(5);

            equals(item.find('> .k-link').data('contentUrl'), 'AjaxView2.html');
        });

    </script>

    <h1 id="qunit-header">kendo.ui.TabStrip Tests</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">test markup, will be hidden</div>
    <ul id="log"></ul>
</body>
</html>

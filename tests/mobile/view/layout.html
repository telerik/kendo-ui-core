<!DOCTYPE dom>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <script src="../../../src/jquery.js"></script>
        <script src="../../qunit/qunit/qunit.js"></script>
        <script src="../../qunit-runner.js"></script>
        <script src="../../../src/kendo.core.js"></script>
        <script src="../../../src/kendo.fx.js"></script>
        <script src="../../../src/kendo.data.js"></script>
        <script src="../../../src/kendo.binder.js"></script>
        <script src="../../../src/kendo.userevents.js"></script>
        <script src="../../../src/kendo.draganddrop.js"></script>
        <script src="../../../src/kendo.router.js"></script>
        <script src="../../../src/kendo.mobile.scroller.js"></script>
        <script src="../../../src/kendo.mobile.loader.js"></script>
        <script src="../../../src/kendo.mobile.view.js"></script>
        <script src="../../../src/kendo.mobile.pane.js"></script>
        <script src="../../../src/kendo.mobile.application.js"></script>
        <script src="../../../src/kendo.mobile.button.js"></script>
        <link rel="stylesheet" href="../../qunit/qunit/qunit.css" />
    </head>
    <body>
        <h1 id="qunit-header">kendo.mobile.ui.Layout Tests</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>
        <div id="qunit-fixture">test markup, will be hidden</div>
        <ul id="log"></ul>

        <script>
            var View = kendo.mobile.ui.View,
                Layout = kendo.mobile.ui.Layout,
                root,
                view,
                layout;

            function setup(viewHtml, layoutHtml) {
                root = $(viewHtml);
                layout = kendo.initWidget($(layoutHtml), {}, kendo.mobile.ui.roles);
                view = kendo.initWidget(root, {layout: layout}, kendo.mobile.ui.roles);
                view.switchWith(null, '', {}, $.noop);
            }

            function success() {
                ok(true);
            }

            module("mobile view");

            test("uses layout header and footer when shown", 2, function() {
                setup('<div data-role="view"></div>',
                    '<div data-role="layout"><div data-role="header">Header</div><div data-role="footer">Footer</div></div>');

                equal(root.find('[data-role=header]').text(), 'Header');
                equal(root.find('[data-role=footer]').text(), 'Footer');
            });

            test("does not override own headers and footers", 2, function() {
                setup('<div data-role="view"><div data-role="header">Own Header</div><div data-role="footer">Own Footer</div></div>',
                    '<div data-role="layout"><div data-role="header">Header</div><div data-role="footer">Footer</div></div>');

                equal(root.find('[data-role=header]').text(), 'Own Header');
                equal(root.find('[data-role=footer]').text(), 'Own Footer');
            });

            test("Layout triggers init", 1, function() {
                setup('<div data-role="view">', '</div><div data-role="layout" data-init="success" />');
            });

            test("Layout triggers show", 1, function() {
                setup('<div data-role="view" data-layout="foo"></div>', '<div data-id="foo" data-role="layout" data-show="success" />');
            });
        </script>
    </body>
</html>


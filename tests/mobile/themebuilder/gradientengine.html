<!DOCTYPE dom>
<html>
    <head>
        <title>kendo.mobile.themebuilder.GradientEngine Tests</title>
        <script src="../../../src/jquery.js"></script>
        <script src="../../qunit/qunit/qunit.js"></script>
        <script src="../../qunit-runner.js"></script>
        <script src="../../../src/kendo.core.js"></script>
        <script src="../../../demos/mvc/content/mobilethemebuilder/scripts/colorengine.js"></script>
        <script src="../../../demos/mvc/content/mobilethemebuilder/scripts/gradientengine.js"></script>
        <link rel="stylesheet" href="../../qunit/qunit/qunit.css" />
    </head>
    <body>
        <h1 id="qunit-header">kendo.mobile.themebuilder.GradientEngine Tests</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>
        <div id="qunit-fixture">test markup, will be hidden</div>
        <ul id="log"></ul>

        <script>
            var gradientEngine = new Gradient("#000"),
                root = $("#qunit-fixture");

            ////////////////////////////////////////////////////////////////////
            module("gradient engine", {});

            test("parseGradient preserves start point", 1, function() {
                ok(gradientEngine.parseGradient("-webkit-linear-gradient(left, #0b47a2)")[0].start.original == "left");
            });

            test("parseGradient parses color and position", 2, function() {
                var gradientStop = gradientEngine.parseGradient("-webkit-linear-gradient(left, #0b47a2 5%)")[0].stops[0];

                ok(gradientStop.color.get() == "#0b47a2");
                ok(gradientStop.position == "5");
            });

            test("get method returns browser specific gradient", 1, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, #0b47a2 5%)");

                ok(gradient.get().match(/-\w*?-/)[0] == kendo.support.transforms.css);
            });

            test("get method returns WebKit style gradient in WebKit browsers", 1, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, #0b47a2 5%)");

                ok(gradient.get("-webkit-") == "-webkit-gradient(linear,0 50%,100% 50%,color-stop(.05, #0b47a2))");
            });

            test("multiple get method returns multiple WebKit style gradient in WebKit browsers", 1, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, #0b47a2 5%), -webkit-linear-gradient(left, #0b47a2 5%)");

                ok(gradient.get("-webkit-") == "-webkit-gradient(linear,0 50%,100% 50%,color-stop(.05, #0b47a2)),-webkit-gradient(linear,0 50%,100% 50%,color-stop(.05, #0b47a2))");
            });

            test("get method returns W3C style gradients in the rest of the browsers", 4, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, #0b47a2 5%)");

                ok(gradient.get("-moz-") == "-moz-linear-gradient(left,#0b47a2 5%)");
                ok(gradient.get("-ms-") == "-ms-linear-gradient(left,#0b47a2 5%)");
                ok(gradient.get("-o-") == "-o-linear-gradient(left,#0b47a2 5%)");
                ok(gradient.get("") == "linear-gradient(left,#0b47a2 5%)");
            });

            test("multiple get method returns multiple W3C style gradients in the rest of the browsers", 4, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, #0b47a2 5%), -webkit-linear-gradient(left, #0b47a2 5%)");

                ok(gradient.get("-moz-") == "-moz-linear-gradient(left,#0b47a2 5%),-moz-linear-gradient(left,#0b47a2 5%)");
                ok(gradient.get("-ms-") == "-ms-linear-gradient(left,#0b47a2 5%),-ms-linear-gradient(left,#0b47a2 5%)");
                ok(gradient.get("-o-") == "-o-linear-gradient(left,#0b47a2 5%),-o-linear-gradient(left,#0b47a2 5%)");
                ok(gradient.get("") == "linear-gradient(left,#0b47a2 5%),linear-gradient(left,#0b47a2 5%)");
            });

            test("0 and 100% are stripped in W3C style gradients", 1, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, #0b47a2 0%, #0b47a3 10%, #0b47a4 100%)");

                ok(gradient.get("") == "linear-gradient(left,#0b47a2,#0b47a3 10%,#0b47a4)");
            });

            test("gradient RGB colors get converted to HEX", 1, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, rgb(0,0,0))");

                ok(gradient.get("") == "linear-gradient(left,#000)");
            });

            test("gradient RGB colors get converted to HEX", 1, function () {
                var gradient = new Gradient("-webkit-linear-gradient(left, rgb(0,0,0))");

                ok(gradient.get("") == "linear-gradient(left,#000)");
            });

        </script>
    </body>
</html>

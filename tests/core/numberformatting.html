<!DOCTYPE html>
<html>
    <head>
        <title>Number Formatting</title>
        <script src="../../src/jquery.js"></script>
        <script src="../qunit.js"></script>
        <script src="../qunit-runner.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <link rel="stylesheet" href="../qunit.css" />
    </head>
    <body>
        <h1 id="qunit-header">Number Formatting</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>
        <div id="qunit-fixture">test markup, will be hidden</div>
        <ul id="log"></ul>

        <script type="text/javascript">
            var toString = kendo.toString;

            test("toString should return empty string if no number", function() {
                equal(toString(), "");
            });

            test("if not toString should return number.toString()", function() {
                equal(toString(10.1), "10.1");
            });

            //positive custom toString
            test("replace toString with whole part of the number", function() {
                equal(toString(10.1, "$ #"), "$ 10");
            });

            test("replace # after 0 with 0", function() {
                equal(toString(10.1, "$ #0####"), "$ 00010");
            });

            test("remove # from toString after replace", function() {
                equal(toString(10.1, "$ ####"), "$ 10");
            });

            test("apply thousand separator if ','", function() {
                equal(toString(1000.1, "$ ##,##"), "$ 1,000"); //use globalization thousand separator count
            });

            test("do not apply thousand separator if no enough digits", function() {
                equal(toString(10, "$ ##,##"), "$ 10"); //use globalization thousand separator count
            });

            test("replace number in decimal part", function() {
                equal(toString(10.1, "####.#"), "10.1");
            });

            test("replace # before 0 with 0 in decimal part", function() {
                equal(toString(10.1, "####.####0#"), "10.10000");
            });

            test("replace # from decimal part", function() {
                equal(toString(10.1, "####.####"), "10.1");
            });

            test("replace # from decimal part", function() {
                equal(toString(10.1, "####.####"), "10.1");
            });

            test("integer if no 0 in decimal part of the toString", function() {
                equal(toString(10, "####.#"), "10");
            });

            test("negative integer if no 0 in decimal part of the toString", function() {
                equal(toString(-10, "####.#"), "-10");
            });

            test("decimal if 0 in the decimal part of toString", function() {

                equal(toString(10, "####.#0#"), "10.00");
            });

            test("one digit after decimal point", function() {
                equal(toString(10, "####.0"), "10.0");
            });

            test("round number if last sigh in the toString is 0", function() {
                equal(toString(10.99, "####.0"), "11.0");
            });

            test("toString decimal number 0.001", function() {
                equal(toString(0.001, "####.#0#"), "0.001");
            });

            test("toString decimal number -0.001", function() {
                equal(toString(-0.001, "####.#0#"), "-0.001");
            });

            test("custom toString with literals", function() {
                equal(toString(10.1, "'EFD' #"), "'EFD' 10");
            });

            test("custom toString with %", function() {
                equal(toString(10.1, "# %"), "1010 %");
            });

            //negative custom toString
            test("toString decimal number -0.001", function() {
                equal(toString(-0.001, "####;-(#.#)"), "-(0.001)");
            });

            test("toString decimal number -123", function() {
                equal(toString(-123, "####;-(#.00)"), "-(123.00)");
            });

            //zero custom toString
            test("toString decimal number 0", function() {
                equal(toString(0, "####;-(#.#);ZERO"), "ZERO");
            });

            test("toString with #.00 zero number", function() {
                equal(toString(0, "####;-(#.00);#.00"), "0.00");
            });

            //exponential
            test("toString number with 'e' toString", function() {
                var number = 123;
                equal(toString(number, "e"), number.toExponential());
            });

            test("toString number with 'e10' toString", function() {
                var number = 123;
                equal(toString(number, "e10"), number.toExponential(10));
            });

            test("toString 123.123 with 'e' toString", function() {
                var number = 123;
                equal(toString(number, "e10"), number.toExponential(10));
            });

            test("toString one digit number with 'e' toString", function() {
                var number = 1;
                equal(toString(number, "e"), number.toExponential());
            });

            test("toString 0 with 'e' toString", function() {
                var number = 0;
                equal(toString(number, "e"), number.toExponential());
            });

            test("toString 0.001 with 'e' toString", function() {
                var number = 0.001;
                equal(toString(number, "e"), number.toExponential());
            });

            test("toString 0.0012 with 'e' toString", function() {
                var number = 0.0012;
                equal(toString(number, "e"), number.toExponential());
            });

            test("toString 0.01243 with 'e' toString", function() {
                var number = 0.01243;
                equal(toString(number, "e"), number.toExponential());
            });

            test("toString 0.01243 with 'e5' toString", function() {
                var number = 0.01243;
                equal(toString(number, "e5"), number.toExponential(5));
            });

            test("toString 0.010043 with 'e5' toString", function() {
                var number = 0.010043;
                equal(toString(number, "e5"), number.toExponential(5));
            });

            //standard formats
            test("N toString big positive integer", function() {
                var number = 10000;
                equal(toString(number, "N"), "10,000.00");
            });

            test("N toString big negative integer", function() {
                var number = -10000;
                equal(toString(number, "N"), "-10,000.00");
            });

            test("N toString small positive integer", function() {
                var number = 10;
                equal(toString(number, "N"), "10.00");
            });

            test("N toString small negative integer", function() {
                var number = -10;
                equal(toString(number, "N"), "-10.00");
            });

            test("N3 toString", function() {
                var number = 10.3337;
                equal(toString(number, "N3"), "10.334");
            });

            test("N0 toString", function() {
                var number = 10.3337;
                equal(toString(number, "N0"), "10");
            });

            test("C toString", function() {
                var number = 10.3337;
                equal(toString(number, "C"), "$10.33");
            });

            test("C0 toString", function() {
                var number = 10.3337;
                equal(toString(number, "C0"), "$10");
            });

            test("C3 negative toString", function() {
                var number = -10.3337;
                equal(toString(number, "C3"), "($10.334)");
            });

            test("group separators are not applied to numbers with less digits", function() {
                equal(toString(123, "C"), "$123.00");
            });

            test("group separators applied every n digits", function() {
                equal(toString(1234567, "C"), "$1,234,567.00");
            });
        </script>
    </body>
</html>

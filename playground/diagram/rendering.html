<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8"/>
    <title>Rendering</title>
    <script src="../../src/jquery.js"></script>
    <script src="../../src/kendo.core.js"></script>
    <script src="../../src/kendo.color.js"></script>
    <script src="../../src/kendo.data.js"></script>
    <script src="../../src/kendo.popup.js"></script>
    <script src="../../src/kendo.list.js"></script>
    <script src="../../src/kendo.dataviz.core.js"></script>
    <script src="../../src/kendo.data.js"></script>
    <script src="../../src/kendo.draganddrop.js"></script>
    <script src="../../src/kendo.slider.js"></script>
    <script src="../../src/kendo.resizable.js"></script>
    <script src="../../src/kendo.userevents.js"></script>
    <script src="../../src/kendo.fx.js"></script>
    <script src="../../src/kendo.mobile.scroller.js"></script>
    <script src="../../src/kendo.toolbar.js"></script>

    <script src="../../src/kendo.dataviz.core.js"></script>
    <script src="../../src/kendo.dataviz.themes.js"></script>

     <script src="../../src/util/main.js"></script>     
     <script src="../../src/mixins/observers.js"></script>
     <script src="../../src/geometry/main.js"></script>
     <script src="../../src/drawing/core.js"></script>     
     <script src="../../src/drawing/mixins.js"></script>
     <script src="../../src/drawing/text-metrics.js"></script>
     <script src="../../src/drawing/shapes.js"></script>
     <script src="../../src/drawing/parser.js"></script>
     <script src="../../src/drawing/svg.js"></script>
     <script src="../../src/drawing/canvas.js"></script>
     <script src="../../src/drawing/vml.js"></script>

    <script src="../../src/dataviz/diagram/utils.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/math.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/svg.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/services.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/dom.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/layout.js" type="text/javascript"></script>
</head>
<body>
<button type="button" id="toggle">Toggle Manipulations</button>
<div id="canvas" style="border:1px solid black;width: 1200px;"></div>
<div style="width: 2000px;"></div>
<script>
    var dataviz = kendo.dataviz;
    var diagram = dataviz.diagram;

    function createDiagram() {
    $("#canvas").kendoDiagram({
        dataSource: {
            data: [{
                "name" : "Telerik",
                "items": [                    
                    {"name": "Icenium"},
                     {"name": "Kendo"},
                    {"name": "Icenium"},
                     {"name": "Kendo"},
                    {"name": "Icenium"},
                     {"name": "Kendo"},
                    {"name": "Icenium"}
                ]
            }],
            schema: {
                model: {
                    children: "items"
                }
            }
        },
        layout:{
            type: "tree",
            subtype: "Down"
        },
        pannable: {
            key: "none"
        },
        selectable: {
            key: "ctrl"
        },
        shapeDefaults: {
            // type: "image",
            // source: "http://demos.telerik.com/kendo-ui/content/web/foods/1.jpg"
            //visual: visual,
            type: "rectangle",
            content: {
                text: "KOR"
            },
            width: 100,
            height: 200,
            hover: {
                fill: "green"
            }
        },
        connectionDefaults: {
            stroke: {
                color: "#979797",
                width: 2
            },
            startCap: "FilledCircle",
            endCap: "ArrowEnd"
        }
       //, zoom: 2
    });    
    //diagram.bringIntoView([shape]);

     $("#toggle").on("click tap", function() {
        $("#canvas").data().kendoDiagram.toggleManipulations();
     });

     $("#endGroup").click(function() {
        diagram.bringIntoView([diagram.shapes[diagram.shapes.length - 1]], {animate: true});
     });
     $("#active").mousedown(function() {
        console.log(kendo._activeElement().id);
     });
    function visual(options) {
        var diagram = kendo.dataviz.diagram;
        var g = new diagram.Group({
            //autoSize: true
        });

        var r = new diagram.Path({
            data: "M7.115,16C3.186,16,0,12.814,0,8.885C0,5.3,2.65,2.336,6.099,1.843V0l4.85,2.801l-4.85,2.8V3.758 c-2.399,0.473-4.21,2.588-4.21,5.126c0,2.886,2.34,5.226,5.226,5.226s5.226-2.34,5.226-5.226c0-1.351-0.513-2.582-1.354-3.51 l1.664-0.961c0.988,1.222,1.581,2.777,1.581,4.472C14.23,12.814,11.045,16,7.115,16L7.115,16z",
            width: 100,
            height: 100,
            fill: "LimeGreen",
            stroke: {
                width: 0
            }
        });
        g.append(r);
        var line = new diagram.Polyline({
            points: [{x: 10, y: 10}, {x: 50, y: 50}, {x: 100, y: 30}],
            from: {x: 10, y: 10},
            to: {x: 100, y: 90},
            startCap: "FilledCircle",
            endCap: "ArrowEnd"
        });
        //g.append(line);
        var fn = new diagram.TextBlock({
            text: options.dataItem.name,
            fontSize: 16,
            width: 100,
            height: 100,
            //autoSize: false,
            x: 0,
            y: 0
        });
        g.append(fn);
        return g;
    }
    }

    $(document).ready(createDiagram);
</script>
</body>
</html>

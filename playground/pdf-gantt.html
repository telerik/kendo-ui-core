<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Kendo GanttChart</title>

    <!-- Styles -->
    <link href="../dist/styles/web/kendo.common.css" rel="stylesheet" />
    <link href="../dist/styles/web/kendo.silver.css" rel="stylesheet" />

    <script src="html2canvas.min.js"></script>
    <script src="loader.js"></script>
    <script>
      requireSync([
        "../src/jquery.js",
        "../src/kendo.all.js",
        "./console.time.js",
        "./test-pdf-helpers.js"
      ]);
    </script>

    <!-- <script src="./pako.min.js"></script> -->
    <script src="./html2canvas.min.js"></script>

    <!-- Page Styles -->
    <style>

        body {
            font: 13px normal Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 10px;
        }

        body, html {
            height: 100%;
        }

    </style>

</head>
<body>

    <script type="text/javascript">

        var gantt;

        $(function StartingPoint() {
            var serviceRoot = "http://demos.telerik.com/kendo-ui/service/";
            var tasksDataSource = new kendo.data.GanttDataSource({
                batch: false,
                transport: {
                    read: { url: serviceRoot + "/GanttTasks", dataType: "jsonp" },
                    update: { url: serviceRoot + "/GanttTasks/Update", dataType: "jsonp" },
                    destroy: { url: serviceRoot + "/GanttTasks/Destroy", dataType: "jsonp" },
                    create: { url: serviceRoot + "/GanttTasks/Create", dataType: "jsonp" },
                    parameterMap: function(options, operation) {
                        if (operation !== "read") {
                            return { models: kendo.stringify(options.models || [options]) };
                        }
                    }
                },
                schema: {
                    model: {
                        id: "id",
                        fields: {
                            id: { from: "ID", type: "number" },
                            orderId: { from: "OrderID", type: "number", validation: { required: true } },
                            parentId: { from: "ParentID", type: "number", validation: { required: true }, defaultValue: null },
                            start: { from: "Start", type: "date" },
                            end: { from: "End", type: "date" },
                            title: { from: "Title", defaultValue: "", type: "string" },
                            percentComplete: { from: "PercentComplete", type: "number" },
                            summary: { from: "Summary", type: "boolean" },
                            expanded: { from: "Expanded", type: "boolean" }
                        }
                    }
                }
            });
            var dependenciesDataSource = new kendo.data.GanttDependencyDataSource({
                batch: false,
                transport: {
                    read: { url: serviceRoot + "/GanttDependencies", dataType: "jsonp" },
                    update: { url: serviceRoot + "/GanttDependencies/Update", dataType: "jsonp" },
                    destroy: { url: serviceRoot + "/GanttDependencies/Destroy", dataType: "jsonp" },
                    create: { url: serviceRoot + "/GanttDependencies/Create", dataType: "jsonp" },
                    parameterMap: function(options, operation) {
                        if (operation !== "read") {
                            return { models: kendo.stringify(options.models || [options]) };
                        }
                    }
                },
                schema: {
                    model: {
                        id: "id",
                        fields: {
                            id: { from: "ID", type: "number" },
                            predecessorId: { from: "PredecessorID", type: "number" },
                            successorId: { from: "SuccessorID", type: "number" },
                            type: { from: "Type", type: "number" }
                        }
                    }
                }
            });

            gantt = $("#gantt").kendoGantt({
                dataSource: tasksDataSource,
                dependencies: dependenciesDataSource,
                views: [
                    { type: "day", selected: true, selectable: true, slotSize: 80 },
                    { type: "week", selected: true, selectable: true, slotSize: 60, dayHeaderTemplate: kendo.template("#=kendo.toString(start, 'dd')#") },
                    { type: "month", selected: true, slotSize: 150, monthHeaderTemplate: kendo.template("#=kendo.toString(start, 'MMM, yyyy')#") }
                ],
                columns: [
                    { field: "id", title: "ID", sortable: true, editable: false, width: 30 },
                    { field: "title", title: "Title", sortable: true, editable: true, width: 200 },
                    { field: "start", title: "Start Time", sortable: true, editable: true, format: "{0:MM/dd/yyyy HH:mm}", width: 150 },
                    { field: "end", title: "End Time", sortable: true, editable: true, format: "{0:MM/dd/yyyy HH:mm}", width: 150 }
                ],

                workWeekStart: 1,
                workWeekEnd: 5,
                showWorkHours: false,
                showWorkDays: false,
                height: "700px",
                snap: false
            }).data("kendoGantt");
        });

    </script>

    <script> ELEMENT = "[data-role=gantttimeline]" </script>
    <script> ELEMENT = "#gantt" </script>
    <button onclick=" pdf(ELEMENT)">PDF</button>
    <button onclick="draw(ELEMENT, 'svg')">SVG</button>
    <button onclick="draw(ELEMENT, 'canvas')">Canvas</button>
    <button onclick=" h2c(ELEMENT)">html2canvas</button>

    <div style="height: 80%">
      <div id="gantt"></div>
    </div>

</body>
</html>
